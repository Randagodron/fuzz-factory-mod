Version 4
SHEET 1 1004 1080
WIRE -1024 -336 -1024 -368
WIRE -928 -336 -928 -368
WIRE -832 -336 -832 -368
WIRE -736 -336 -736 -368
WIRE 208 -288 208 -320
WIRE 336 -288 208 -288
WIRE 208 -256 208 -288
WIRE 336 -256 336 -288
WIRE -1024 -224 -1024 -256
WIRE -928 -224 -928 -256
WIRE -832 -224 -832 -256
WIRE -736 -224 -736 -256
WIRE 576 -176 544 -176
WIRE 672 -176 656 -176
WIRE 208 -144 208 -176
WIRE 336 -144 336 -176
WIRE 608 -48 608 -80
WIRE 336 -32 336 -64
WIRE 544 -32 544 -176
WIRE 544 -32 336 -32
WIRE 576 -32 544 -32
WIRE 672 -16 672 -176
WIRE 672 -16 640 -16
WIRE 704 -16 672 -16
WIRE 800 -16 768 -16
WIRE 864 -16 800 -16
WIRE 208 0 208 -64
WIRE 544 0 208 0
WIRE 576 0 544 0
WIRE 800 16 800 -16
WIRE 208 32 208 0
WIRE 336 32 336 -32
WIRE 544 32 544 0
WIRE 608 48 608 16
WIRE -128 80 -192 80
WIRE -16 80 -64 80
WIRE 112 80 64 80
WIRE 144 80 112 80
WIRE 432 80 400 80
WIRE 112 112 112 80
WIRE 432 112 432 80
WIRE -800 128 -800 96
WIRE -192 128 -192 80
WIRE 800 128 800 96
WIRE 208 160 208 128
WIRE 336 160 336 128
WIRE 336 160 208 160
WIRE 544 160 544 112
WIRE 112 224 112 192
WIRE 432 224 432 192
WIRE -800 240 -800 208
WIRE -192 240 -192 208
WIRE -400 320 -480 320
WIRE -272 320 -320 320
WIRE -48 320 -176 320
WIRE 80 320 -48 320
WIRE -480 352 -480 320
WIRE -272 352 -272 320
WIRE -176 352 -176 320
WIRE -48 352 -48 320
WIRE 208 352 208 160
WIRE 80 400 80 320
WIRE 80 400 16 400
WIRE 144 400 80 400
WIRE -224 448 -224 416
WIRE -480 480 -480 432
WIRE -48 480 -48 448
WIRE 208 480 208 448
WIRE -192 688 -416 688
WIRE -352 784 -352 752
WIRE -416 800 -416 688
WIRE -384 800 -416 800
WIRE 512 800 512 768
WIRE -288 816 -320 816
WIRE -192 816 -192 688
WIRE -192 816 -224 816
WIRE -112 816 -192 816
WIRE -80 816 -112 816
WIRE 480 816 448 816
WIRE -384 832 -416 832
WIRE 640 832 544 832
WIRE -192 848 -192 816
WIRE -112 848 -112 816
WIRE 480 848 448 848
WIRE -416 880 -416 832
WIRE -352 880 -352 848
WIRE 448 896 448 848
WIRE 512 896 512 864
WIRE -192 960 -192 912
WIRE -112 960 -112 928
WIRE -112 960 -192 960
WIRE -416 992 -416 960
WIRE -112 992 -112 960
WIRE 448 1008 448 976
FLAG -48 480 0
FLAG 208 480 0
FLAG 208 -320 vcc
FLAG 608 -80 vcc
FLAG 608 48 0
FLAG 544 160 vref
FLAG 432 224 vref
FLAG 112 224 vref
FLAG -224 448 vref
FLAG -800 240 0
FLAG -832 -368 vcc
FLAG -832 -224 0
FLAG -736 -224 0
FLAG -736 -368 vsin
FLAG -1024 -224 0
FLAG -1024 -368 venv
FLAG -928 -368 vref
FLAG -928 -224 0
FLAG -352 752 vcc
FLAG -352 880 0
FLAG -112 992 vref
FLAG -416 992 0
FLAG -80 816 peak
FLAG -800 96 vsample
FLAG 512 768 vcc
FLAG 512 896 0
FLAG 448 1008 0
FLAG 448 816 vref
FLAG 640 832 vcomp
FLAG -192 240 0
FLAG 800 128 0
FLAG 864 -16 out
FLAG -480 480 0
SYMBOL npn 16 352 M0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL npn 144 352 R0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL npn 144 32 R0
SYMATTR InstName Q3
SYMATTR Value 2N3904
SYMBOL npn 400 32 M0
SYMATTR InstName Q4
SYMATTR Value 2N3904
SYMBOL pnp -176 416 M270
SYMATTR InstName Q5
SYMATTR Value 2N3906
SYMBOL res -304 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 416 96 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 96 96 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 192 -160 R0
SYMATTR InstName R4
SYMATTR Value 4k7
SYMBOL res 320 -160 R0
SYMATTR InstName R5
SYMATTR Value 4k7
SYMBOL res 224 -272 M0
SYMATTR InstName R6
SYMATTR Value R=(1-BIAS)*1k
SYMBOL res 320 -272 R0
SYMATTR InstName R7
SYMATTR Value R=BIAS*1k
SYMBOL Opamps\\UniversalOpamp2 608 -16 R0
SYMATTR InstName U1
SYMBOL res 672 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 100k
SYMBOL res 528 16 R0
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL res 80 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 100k
SYMBOL cap -64 64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL voltage -800 112 M0
SYMATTR InstName V1
SYMATTR Value wavefile=.\guit_sample_01.wav chan=0
SYMBOL voltage -832 -352 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 9
SYMBOL voltage -736 -352 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value SINE(0 500m 1k)
SYMBOL voltage -1024 -352 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value PWL(0 0 500m 9)
SYMBOL voltage -928 -352 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 4.5
SYMBOL Opamps\\UniversalOpamp2 -352 816 R0
SYMATTR InstName U2
SYMBOL diode -288 832 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL cap -208 848 R0
SYMATTR InstName C2
SYMATTR Value 220n
SYMBOL res -128 832 R0
SYMATTR InstName R11
SYMATTR Value 1Meg
SYMBOL bv -416 864 M0
SYMATTR InstName B1
SYMATTR Value V=V(vref)+(GAIN*V(vsample))
SYMBOL Opamps\\UniversalOpamp2 512 832 R0
SYMATTR InstName U3
SYMBOL bv 448 880 M0
SYMATTR InstName B2
SYMATTR Value V=V(vref)+(GAIN*V(vsample))
SYMBOL bv -192 112 R0
SYMATTR InstName B3
SYMATTR Value V=V(vcomp)/10
SYMBOL cap 768 -32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL res 784 0 R0
SYMATTR InstName R12
SYMATTR Value 100k
SYMBOL bv -480 336 R0
SYMATTR InstName B4
SYMATTR Value V=V(peak)
TEXT -352 -488 Left 2 !.param BIAS=0.5
TEXT -1024 -544 Left 2 !.op
TEXT -1024 -512 Left 2 !.tran 5
TEXT -736 792 Left 2 !.param GAIN=10
TEXT -1024 -576 Left 2 !.wave .\\vca_02.wav 16 44100 V(out)
